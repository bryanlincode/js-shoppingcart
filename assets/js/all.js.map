{"version":3,"sources":["all.js","config.js"],"names":["api_path","token","carbodyLst","document","querySelector","producsTitel","getProducsData","cartData","init","getProducsList","getCartList","renderList","str","forEach","item","showHtmlString","innerHTML","axios","get","then","res","data","products","error","console","log","changList","addProducsList","category","images","title","id","origin_price","price","addEventListener","e","target","value","preventDefault","addCartCalss","getAttribute","addCardId","numCheck","product","quantity","post","alert","textContent","finalTotal","carts","deleatCardId","deleteAllCart","getBut","length","customerName","customerPhone","customerEmail","customerAddress","customerTradeWay"],"mappings":"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","file":"all.js","sourcesContent":["\nconst api_path = \"luckyshop\";\nconst token = \"ZLaQ9zJkgzUGHMO1qt0B07BG4uB2\";\n\nconst carbodyLst = document.querySelector('.cartList-tbody')\nlet producsTitel = document.querySelector('.productWrap')\nlet getProducsData = [];\nlet cartData = [];\n\n// 渲染初始畫面\nfunction init() {\n  getProducsList();\n  getCartList()\n}\ninit()\n\nfunction renderList() {\n  let str = '';\n  getProducsData.forEach(function(item) {\n    str += showHtmlString(item);\n  });\n  producsTitel.innerHTML = str;\n}\n// 取得商品清單\nfunction getProducsList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`)\n    .then(function(res) {\n      getProducsData = res.data.products;\n      // console.log(getProducsData);\n      renderList()\n    })\n    .catch(function(error) {\n      // handle error\n      console.log(error);\n    })\n}\nconst changList = document.querySelector('.productSelect');\nconst addProducsList = document.querySelector('.productWrap');\n\n// 統一管理 li 字串\nfunction showHtmlString(item) {\n  return `<li class=\"productCard\">\n                <h4 class=\"productType\">${item.category}</h4>\n                <img src=\"${item.images}\" alt=\"${item.title}\">\n                <a href=\"#\" class=\"addCardBtn\" data-id=\"${item.id}\">加入購物車</a>\n                <h3>${item.title}</h3>\n                <del class=\"originPrice\">NT$${item.origin_price}</del>\n                <p class=\"nowPrice\">NT$${item.price}</p>\n            </li>`\n}\nchangList.addEventListener('change', function(e) {\n  // console.log(e.target.value);\n  const category = e.target.value;\n  if (category == \"全部\") {\n    renderList();\n    return;\n  }\n  let str = '';\n  getProducsData.forEach(function(item) {\n    if (item.category == category) {\n      str += showHtmlString(item);\n    }\n  })\n  producsTitel.innerHTML = str;\n})\n\naddProducsList.addEventListener('click', function(e) {\n  e.preventDefault();\n  let addCartCalss = e.target.getAttribute('class')\n\n  if (addCartCalss !== \"addCardBtn\") {\n    return;\n  } else {\n    //取得ID\n    let addCardId = e.target.getAttribute('data-id');\n    // console.log(addCardId);\n    // 加入到購物車\n    let numCheck = 1\n    cartData.forEach(function(item) {\n      // console.log('cart', item);\n      if (item.product.id === addCardId) {\n        numCheck = item.quantity += 1\n      }\n    });\n    axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n      \"data\": {\n        \"productId\": addCardId,\n        \"quantity\": numCheck\n      }\n    }).then(function(res) {\n      console.log(res);\n      alert('已加入購物車');\n      getCartList()\n    })\n  }\n})\n// 取得購物車清單\nfunction getCartList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`)\n    .then(function(res) {\n      document.querySelector('.cardTotal').textContent = res.data.finalTotal\n      let str = '';\n      cartData = res.data.carts;\n      cartData.forEach(function(item) {\n        str += `<tr>\n            <td>\n              <div class=\"cardItem-title\">\n                <img src=\"${item.product.images}\" alt=\"\">\n                <p>${item.product.title}</p>\n              </div>\n            </td>\n            <td>NT$${item.product.price}</td>\n            <td>${item.quantity}</td>\n            <td>NT$${item.product.price * item.quantity}</td>\n            <td class=\"discardBtn\">\n              <a href=\"#\" class=\"material-icons\" data-id=\"${item.id}\">\n                clear\n              </a>\n            </td>\n          </tr>`\n      });\n      carbodyLst.innerHTML = str;\n    })\n}\n// 刪除購物車單筆\ncarbodyLst.addEventListener('click', function(e) {\n  e.preventDefault();\n  const deleatCardId = e.target.getAttribute(\"data-id\");\n  // console.log(deleatCardId);\n  if (deleatCardId !== null) {\n    axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${deleatCardId}`).then(function(res) {\n      alert('購物車已刪除');\n      getCartList();\n    })\n  }\n})\n// 刪除購物車全部\nconst deleteAllCart = document.querySelector(\".discardAllBtn\");\ndeleteAllCart.addEventListener('click', function(e) {\n  e.preventDefault();\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/`).then(function(res) {\n    alert('購物車已全部清空');\n    getCartList();\n  }).catch(function(res) {\n    alert('購物車沒有產品 請加入產品')\n  })\n\n})\n\n// 送出訂單功能\n\nconst getBut = document.querySelector('.orderInfo-btn');\ngetBut.addEventListener('click', function(e) {\n  if (cartData.length == 0) {\n    alert('你還未加入購物車喔？')\n  }\n  e.preventDefault();\n  let customerName = document.querySelector(\"#customerName\").value;\n  let customerPhone = document.querySelector(\"#customerPhone\").value;\n  let customerEmail = document.querySelector(\"#customerEmail\").value;\n  let customerAddress = document.querySelector(\"#customerAddress\").value;\n  let customerTradeWay = document.querySelector(\"#tradeWay\").value;\n  // console.log(customerName, customerPhone, customerEmail, customerAddress, customerTradeWay);\n  if (customerName == \"\" || customerPhone == \"\" || customerEmail == \"\" || customerAddress == \"\" || customerTradeWay == \"\") {\n    alert(\"請輸入訂單資訊\")\n    return\n  }\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`, {\n    \"data\": {\n      \"user\": {\n        \"name\": customerName,\n        \"tel\": customerPhone,\n        \"email\": customerEmail,\n        \"address\": customerAddress,\n        \"payment\": customerTradeWay\n      }\n    }\n  }).then(function(res) {\n    alert('訂單成功');\n    // 訂單input清空 value\n    document.querySelector(\"#customerName\").value = \"\";\n    document.querySelector(\"#customerPhone\").value = \"\";\n    document.querySelector(\"#customerEmail\").value = \"\";\n    document.querySelector(\"#customerAddress\").value = \"\";\n    document.querySelector(\"#tradeWay\").value = \"ATM\"\n    getCartList();\n\n  })\n})","const api_path = \"luckyshop\";\nconst token = \"ZLaQ9zJkgzUGHMO1qt0B07BG4uB2\";"]}